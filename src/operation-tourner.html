<script src="formules.js"></script>
<script src="formes-standard.js"></script>
<script>    
    class Tourner {

        constructor(canvas) {
            this.name = 'tourner'
            this.shape = null
            this.canvas = canvas
        }

        click(position) {
            if (!this.shape) {
                this.shape = this.canvas.currentShape
                if (this.shape) {
                    selectShape(this.shape)
                    this.center = getCGShape(this.shape)
                    this.start = position
                }
            }
            else {
                this.end(position)
            }
        }

        mouseMove(position) {
            if (!this.shape) { return }
            let angle = calculateAngle(this.center, this.start, { x: position.x, y: position.y } )
            rotateShape(this.shape, angle)
            this.start = position
        }

        end(position) {
            if (!this.shape) { return }
            unselectShape(this.shape)
            this.shape = null
        }
    }

</script>