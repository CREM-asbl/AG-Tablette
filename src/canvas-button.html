<link rel="import" href="../bower_components/polymer/polymer-element.html">

<dom-module id="canvas-button">
    <template>
        <style>
             :host {
                display: block;
            }

            canvas {
                width: 100%;
                height: 100%;
                background: #fff;
                border: 1px solid black;
            }

            canvas.active {
                border: 2px solid red;
            }
        </style>

        <canvas id="canvas" width="60px" height="60px" on-click="_clickHandle"></canvas>
    </template>

    <script>
        /**
         * Families buttons event handlers
         */
        class CanvasButton extends Polymer.Element {
            static get is() { return 'canvas-button' }

            static get properties() {
                return {
                    family: {
                        type: String,
                        observer: '_draw'
                    },

                    active: {
                        type: String,
                        notify: true,
                        observer: '_isActive'
                    }
                }
            }

            _clickHandle(event) {
                this.set('active', this.family)
            }

            /**
             * draw the image on the button
             */
            _draw(family) {
                var ctx = this.$.canvas.getContext("2d");
                ctx.fillStyle = "orange";
                ctx.strokeStyle = "red";
                ctx.fillRect(10,10,40,40); //todo draw anything else
            }

            /**
             * set the clicked button as active
             */
            _isActive(current) {
                if (current === this.family) { 
                    this.$.canvas.classList.add('active')
                    return
                }
                this.$.canvas.classList.remove('active')
            }
        }
        customElements.define(CanvasButton.is, CanvasButton)
    </script>
</dom-module>