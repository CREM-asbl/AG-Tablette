<script>
    class Glisser {

        constructor() {
            this.name = 'glisser'
            this.shape = null
        }

        click(event) {
            if (!this.shape) {
                if (event.target.id === "svg") { return }
                this.shape = event.target
                this.startX = event.x
                this.startY = event.y
                this.oldTransform = this.shape.getAttribute('transform')
            }
            else {
                this.glisser(event.x, event.y)
                this.shape = null
            }
        }

        mouseMove(event) {
            if (!this.shape) { return }
            this.glisser(event.x, event.y)
        }

        glisser(x, y) {
            let translateX = x - this.startX
            let translateY = y - this.startY
            //on récupère l'attribut transform et on ajoute la nouvelle transformation
            let current = 'translate(' + translateX + ',' + translateY + ')'
            let transform =  this.oldTransform ? this.oldTransform + ' ' + current : current
            this.shape.setAttribute('transform', transform)
        }
    }

</script>