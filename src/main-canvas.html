<link rel="import" href="../bower_components/polymer/polymer-element.html">
<link rel="import" href="circle-standard.html">

<dom-module id="main-canvas">
    <template>
        <style>
             :host {
                display: block;
            }

            svg {
                width: 100%;
                height: 100%;
                background-color: white;
            }
        </style>
        <!--<circle-standard x="300" y="300"></circle-standard>-->
        <svg id="svg" on-click="_clickHandle" on-swipe="_swipeHandle" on-mousemove="_mouseMoveHandle">
            <!--<circle-standard x="200" y="200"></circle-standard>-->
        </svg>
    </template>
    <script>
        class MainCanvas extends Polymer.Element {

            static get is() { return 'main-canvas' }

            addElement(element) {
                this.$.svg.appendChild(element)
            }

            _clickHandle(event) {
                //Une possibilité est de changer la fonction à exécuter en fonction de l'action en cours
                //AG.currentAction.click(event) par exemple
                //ou une autre façon de faire est que l'objet ajoute un addEventListener sur le svg
                //Comment bien définir les actions ???
                
                // let svg = this.$.svg
                // console.log(svg)
                // //cette instruction ne fonctionne pas (???)
                // svg.title = 'main-canvas'
                // console.log(svg)
                // svg = document.querySelector('#svg')
                // console.log(svg)

                if (window.currentAction) {
                    window.currentAction.click(event)
                }

            }

            _mouseMoveHandle() {
                if (window.currentAction && window.currentAction.mouseMove) {
                    window.currentAction.mouseMove(event)
                }
            }

            _swipeHandle(event) {
                alert('swipe')
            }
        }
        customElements.define(MainCanvas.is, MainCanvas)
    </script>
</dom-module>