<link rel="import" href="../bower_components/polymer/polymer-element.html">
<!--<link rel="import" href="formes-standard.html">-->

<dom-module id="main-canvas">
    <template>
        <style>
             :host {
                display: block;
            }

            svg {
                width: 100%;
                height: 100%;
                background-color: white;
            }
        </style>

        <svg id="svg" on-click="_clickHandle" on-swipe="_swipeHandle">
        </svg>
    </template>
    <script>
        class MainCanvas extends Polymer.Element {

            static get is() { return 'main-canvas' }

            addElement(element) {
                this.$.svg.appendChild(element)
            }

            _clickHandle(event) {
                console.log(event)
                if (!window.currentFamily) { return }

                let element = {}
                switch (window.currentFamily) {
                    case 1:
                        element = document.createElementNS('http://www.w3.org/2000/svg', 'polygon')
                        element.setAttribute('points', event.x + ',' + event.y + ' ' + (event.x+25) + ',' + (event.y-50) + ' ' + (event.x+50) + ',' + event.y)
                        element.setAttribute('fill', 'yellow')
                        element.setAttribute('stroke-width', 2)
                        element.setAttribute('stroke', 'black')
                        element.setAttribute('opacity', .75)
                        break
                    case 2:
                        element = document.createElementNS('http://www.w3.org/2000/svg', 'rect')
                        element.setAttribute('x', event.x)
                        element.setAttribute('y', event.y)
                        element.setAttribute('width', 50)
                        element.setAttribute('height', 50)
                        element.setAttribute('fill', 'red')
                        element.setAttribute('stroke-width', 2)
                        element.setAttribute('stroke', 'black')
                        element.setAttribute('opacity', .75)
                        break
                    case 3:
                        element = document.createElementNS('http://www.w3.org/2000/svg', 'circle')
                        element.setAttribute('cx', event.x)
                        element.setAttribute('cy', event.y)
                        element.setAttribute('r', 25)
                        element.setAttribute('fill', 'green')
                        element.setAttribute('stroke-width', 2)
                        element.setAttribute('stroke', 'black')
                        element.setAttribute('opacity', .75)
                        break
                }
                this.addElement(element)
                //je modifie un élément
                // this.$.test.setAttribute('cx', event.x)
                // this.$.test.setAttribute('cy', event.y)
                // this.$.test.setAttribute('fill', 'blue')
                
            }

            _swipeHandle(event) {
                alert('swipe')
            }
        }
        customElements.define(MainCanvas.is, MainCanvas)
    </script>
</dom-module>